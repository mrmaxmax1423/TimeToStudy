@model EventViewModel
@{
    ViewData["Title"] = "Homework";
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title> Events</title>
</head>
<body>
    <h1>Events and Assignments</h1>
</body>

<div class="col-sm-4">
    <div class="list-group">
        <form asp-controller="Event" asp-action="AddEvent">
            <button type="submit" class="btn btn-primary btn-sm"> Add Event </button>
        </form>
    </div>
</div>
<div class="row">

    <div class="col-sm-10">
        <table style="width:150%" class="table table-bordered table-striped">
            <colgroup>
                <col span="1" style="width: 15%;">
                <col span="1" style="width: 55%;">
                <col span="1" style="width: 15%;">
                <col span="1" style="width: 15%;">
            </colgroup>
            <thead>
                <tr>
                    <th>Event Label</th>
                    <th>Desciption</th>
                    <th>Event Time</th>
                    <th>Due Date?</th>
                    <th></th>
            </thead>
            <tbody>
                @foreach (Event E in Model.Events)
                {
                    DateTime today = DateTime.Today;
                    <tr>
                        <td>@E.EventLabel</td>
                        <td div style="font-size: 12px;">@E.EventDescription</td>
                        @if (@E.EventTime != null)
                        {
                            <td>@E.EventTime</td>
                        }
                        else
                        {
                            <td>
                                @if ((E.DueDate > today && E.SetTime == false) || E.DueDate == null)
                                {
                                    <form asp-action="ScheduleEvent" method="post">
                                        <input type="hidden"
                                               name="@nameof(Event.EventId)" value="@E.EventId" />
                                        <button type="submit"
                                                class="btn btn-primary btn-sm">
                                            Schedule Event
                                        </button>
                                    </form>
                                }
                                @if (E.DueDate < today)
                                {
                                    <div>Past Due</div>
                                }
                            </td>
                        }

                        <td>@E.DueDate</td>
                        <td>
                            <form asp-action="DeleteEvent" method="post">
                                <input type="hidden"
                                       name="@nameof(Event.EventId)" value="@E.EventId" />
                                <button type="submit"
                                        class="btn btn-primary btn-sm">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>

</html>